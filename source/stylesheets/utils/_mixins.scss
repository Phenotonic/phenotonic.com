// -----------------------------------------------------------------------------
// This file contains all application-wide Sass mixins.
// -----------------------------------------------------------------------------

// EVENT WRAPPER
// =============
// @author Harry Roberts
// @param {Bool} $self [false] - Whether or not to include current selector
// @link https://twitter.com/csswizardry/status/478938530342006784 Original tweet from Harry Roberts

@mixin on-event($self: false) {
  @if $self {
    &,
    &:hover,
    &:active,
    &:focus {
      @content;
    }
  }
  @else {
    &:hover,
    &:active,
    &:focus {
      @content;
    }
  }
}

// IN-CONTEXT
// ==========
// Make a context based selector a little more friendly
// @author Hugo Giraudel
// @param {String} $context

@mixin when-inside($context) {
  #{$context} & {
    @content;
  }
}

// RESPONSIVE MANAGER
// ==================
// @param {String} $breakpoint - Breakpoint
// @requires $breakpoints
// @link http://sass-guidelin.es/#breakpoint-manager Sass Guidelines - Breakpoint Manager

@mixin respond-to($breakpoint) {
  $query: map-get($breakpoints, $breakpoint);

  @if not $query {
    @error 'No value found for `#{$breakpoint}`. Please make sure it is defined in `$breakpoints` map.';
  }

  @media #{if(type-of($query) == 'string', unquote($query), inspect($query))} {
    @content;
  }
}

// FONT AUTOMATER
// ==============
// @param {String} $group - Typeface
// @param {String} $id - Font
// @requires $font-stack
// @author hmphry
// @link http://hmphry.com/useful-sass-mixins

@mixin font($group, $id:regular) {
  @each $font in $font-stack {
    @if ($group == map-get($font, group) and $id == map-get($font, id)) {
      font-family: map-get($font, font);
      font-weight: map-get($font, weight);
      font-style: map-get($font, style);
    }
  }
}

// BACKGROUND IMAGE GENERATOR
// ==========================
// @param {String} $image - Image name
// @param {String} $ext - Image extension (.jpg, .png, .gif)
// @param {Number} $level - # of image variants, including base image

@mixin background-image($image, $ext: 'jpg', $level: 4) {
  background-image: url('../images/#{$image}.#{$ext}');
  @if $level > 1 {
    @include respond-to(small) { background-image: url('../images/#{$image}@2x.#{$ext}'); }
  }
  @if $level > 2 {
    @include respond-to(medium) { background-image: url('../images/#{$image}@3x.#{$ext}'); }
  }
  @if $level > 3 {
    @include respond-to(large) { background-image: url('../images/#{$image}@4x.#{$ext}'); }
  }
}

// CONTAINER
// =========

@mixin container($max: $max-width) {
  display: relative;

  width: 100%;
  max-width: $max;

  margin: 0 auto;
  padding: $gutter;
}

// CARD
// ====

@mixin card($bg: $background-primary, $shadow: $shadow-primary) {
  border-radius: $gutter * 0.5;
  padding: $gutter;

  background-color: $bg;

  box-shadow: 0 0 5px $shadow;
}
